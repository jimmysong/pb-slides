<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Session 8 - Communication and Segwit</title>

    <link rel="stylesheet" href="dist/custom.css">
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/solarized.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/zenburn.css">
  </head>
  <body>
<div class="reveal">
  <div class="slides">
<section>
  <h2> Class Schedule </h2>
  <div class="container">
    <div class="col">
      <h3>Day 1</h3>
      <ul>
        <li>Foundational Math</li>
        <li>Elliptic Curve Cryptography</li>
        <li>Transaction Parsing</li>
        <li>Script</li>
      </ul>
    </div>
    <div class="col">
      <h3>Day 2</h3>
      <ul>
        <li>Transaction Construction</li>
        <li>Blocks</li>
        <li>Networking and Merkle Trees</li>
        <li class="current">Communication and Segwit</li>
      </ul>
    </div>
  </div>
</section>
<section>
  <section>
    <h1>Communication and Segwit</h1>
  </section>
  <section>
    <h2>Session 8 Objectives</h2>
    <ul>
      <li class="fragment"><strong>More Network Communication</strong>
      <li class="fragment"><strong>Construct Transaction using Network Communications Only </strong>
      <li class="fragment"><strong>Learn Segwit </strong>
      <li class="fragment"><strong>Discuss Next Steps</strong>
    </ul>
  </section>
  <section>
    <h2>Exercise 1 and 2</h2>
    <ol start="1">
      <li>Write the <code>get_transactions</code> method for the <code>Block</code> class.</li>
      <li>Check that the block with your previous transaction in fact has it. Here is the block: <code class="smallhex">00000112827d89ac00efb3035585d6c05a771a664da86e28b7e9a3d7f80b4b0d</code></li>
    </ol>
  </section>
</section>
<section>
  <section>
    <h2>Working with Bitcoin Nodes</h2>
    <ul>
      <li class="fragment">You can request any transaction or block from nodes.</li>
      <li class="fragment">Requesting transactions reduces privacy</li>
      <li class="fragment">Request blocks and search for your transaction</li>
      <li class="fragment">This can be done using Compact Filters</li>
    </ul>
  </section>
  <section>
    <h2>Exercise 3</h2>
    <ol start="3">
      <li>Write the <code>get_block</code> method for the <code>SimpleNode</code> class.</li>
    </ol>
  </section>
</section>
<section>
  <section>
    <h2>Checkpoint: Exercise 4</h2>
    <ol start="4">
      <li>You have been sent some more sats on signet to the address you previously used. Send all of it back to <code>mqYz6JpuKukHzPg94y4XNDdPCEJrNkLQcv</code>.<p>You will be getting the UTXO by downloading the entire block via the network and will also send your transaction directly to the network.</p> Here is the block: <code class="smallhex">000000f0fc57b3475ce9e84df39372e49cc20a3688fdae4eeb4aabbdcc5118b1</code></li>
    </ol>
  </section>
</section>
<section>
  <section>
    <h2>Segregated Witness</h2>
  </section>
  <section>
    <h2>What is a Segregated Witness?</h2>
    <ul>
      <li class="fragment">Soft fork that includes a bunch of upgrades.</li>
      <li class="fragment">Transaction malleability fix.</li>
      <li class="fragment">Block size increase.</li>
      <li class="fragment">Technically simpler path for future upgrades.</li>
      <li class="fragment">Introduces 4 new address types:
        <ul>
          <li class="fragment">pay-to-witness-pubkey-hash (p2wpkh)</li>
          <li class="fragment">pay-to-script-hash-pay-to-witness-pubkey-hash (p2sh-p2wpkh)</li>
          <li class="fragment">pay-to-witness-script-hash (p2wsh)</li>
          <li class="fragment"> pay-to-script-hash-pay-to-witness-script-hash (p2sh-p2wsh)</li>
        </ul>
      </li>
    </ul>
  </section>
  <section>
    <h3>How does segregated witness work?</h3>
    <ul>
      <li class="fragment">ScriptSig data in a different place.</li>
      <li class="fragment">Special rules are executed based on the state of the stack much like p2sh</li>
      <li class="fragment">Different data is sent to older nodes vs. newer nodes.</li>
      <li class="fragment">Older nodes don't get witness data (signatures, pubkeys, scripts) and don't validate</li>
      <li class="fragment">Newer nodes get all the data and validate them.</li>
    </ul>
  </section>
  <section>
    <h3>How SegWit is a soft-fork Block Size increase</h3>
    <div class="container smallhex">
      <div class="col spaced">
        <h2>p2pkh</h2>
        <code class="brown">01000000</code><code class="red">01</code><code class="blue">813f79011acb80925dfe69b3def355fe914bd1d96a3f5f71bf8303c6a989c7d1</code><code class="magenta">00000000</code><code class="yellow">6b483045022100ed81ff192e75a3fd2304004dcadb746fa5e24c5031ccfcf21320b0277457c98f02207a986d955c6e0cb35d446a89d3f56100f4d7f67801c31967743a9c8e10615bed01210349fc4e631e3624a545de3f89f5d8684c7b8138bd94bdd531d2e213bf016b278a</code><code class="purple">feffffff</code><code class="red">02</code><code class="green">a135ef0100000000</code><code class="dark-orange">1976a914bc3b654dca7e56b04dca18f2566cdaf02e8d9ada88ac</code><code class="green">99c3980000000000</code><code class="dark-orange">1976a9141c4bc762dd5423e332166702cb75f40df79fea1288ac</code><code class="dark-red">19430600</code>
      </div>
      <div class="col spaced">
        <h2>p2wpkh</h2>
        <code class="brown">01000000</code><code class="red">01</code><code class="blue">15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856</code><code class="magenta">01000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">00b4f50500000000</code><code class="dark-orange">1976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac</code><code class="dark-red">00000000</code>
      </div>
    </div>
  </section>
  <section>
    <h3>Different data is sent</h3>
    <div class="container medhex">
      <div class="col spaced">
        <h2>Old nodes</h2>
        <code class="brown">01000000</code><code class="red">01</code><code class="blue">15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856</code><code class="magenta">01000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">00b4f50500000000</code><code class="dark-orange">1976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac</code><code class="dark-red">00000000</code>
      </div>
      <div class="col spaced">
        <h2>New nodes</h2>
        <code class="brown">01000000</code><code class="light-blue">0001</code><code class="red">01</code><code class="blue">15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856</code><code class="magenta">01000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">00b4f50500000000</code><code class="dark-orange">1976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac</code><code class="cyan">02483045022100df7b7e5cda14ddf91290e02ea10786e03eb11ee36ec02dd862fe9a326bbcb7fd02203f5b4496b667e6e281cc654a2da9e4f08660c620a1051337fa8965f727eb19190121038262a6c6cec93c2d3ecd6c6072efea86d02ff8e3328bbd0242b20af3425990ac</code><code class="dark-red">00000000</code>
    </div>
  </div>
  </section>
</section>
<section>
  <section>
    <h2>pay-to-witness-pubkey-hash (p2wpkh)</h2>
  </section>
  <section>
    <h3>What is p2wpkh?</h3>
    <ul>
      <li class="fragment">Single-key locked output.</li>
      <li class="fragment">Similar to p2pkh but uses SegWit.</li>
      <li class="fragment">Uses a new address format (bech32).</li>
      <li class="fragment">Uses a special rule based on stack items (20-byte hash and 0)</li>
    </ul>
  </section>
  <section>
    <h3>Old Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><code class="red">01</code><code class="blue">15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856</code><code class="magenta">01000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">00b4f50500000000</code><code class="dark-orange">1976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac</code><code class="dark-red">00000000</code><br/>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">15e1…56</code> - Prev tx hash
            <li><code class="magenta">01000000</code> - Prev tx index
            <li><code class="yellow">00</code> - ScriptSig
            <li><code class="purple">ffffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">01</code> - Number of outputs
            <li><code class="green">00b4…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1976…ac</code> - ScriptPubKey
            <li><code class="dark-red">00000000</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h3>New Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><strong><code class="light-blue">0001</code></strong><code class="red">01</code><code class="blue">15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856</code><code class="magenta">01000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">00b4f50500000000</code><code class="dark-orange">1976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac</code><strong><code class="cyan">02483045022100df7b7e5cda14ddf91290e02ea10786e03eb11ee36ec02dd862fe9a326bbcb7fd02203f5b4496b667e6e281cc654a2da9e4f08660c620a1051337fa8965f727eb19190121038262a6c6cec93c2d3ecd6c6072efea86d02ff8e3328bbd0242b20af3425990ac</code></strong><code class="dark-red">00000000</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><strong><code class="light-blue">0001</code> - Segwit Marker</strong>
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">15e1…56</code> - Prev tx hash
            <li><code class="magenta">01000000</code> - Prev tx index
            <li><code class="yellow">00</code> - ScriptSig
            <li><code class="purple">ffffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">01</code> - Number of outputs
            <li><code class="green">00b4…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1976…ac</code> - ScriptPubKey
            <li><strong><code class="cyan">0248…ac</code> - Witness </strong>
            <li><code class="dark-red">00000000</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h2>p2wpkh ScriptPubKey</h2>
    <div class="bighex"><code class="red">00</code><code class="green">14</code><code class="dark-orange">1d7cd6c75c2e86f4cbf98eaed221b30bd9a0b928</code><p/>
      <ul>
        <li class="fragment"><code class="red">00</code> - <code>OP_0</code></li>
        <li class="fragment"><code class="green">14</code> - Length of Hash160</li>
        <li class="fragment"><code class="dark-orange">1d7c…28</code> - Hash160</li>
      </ul>
    </div>
  </section>
  <section>
    <h2>Combined Script</h2>
    <div class="container">
    <div class="stack fragment">
      <div class="row">
        ScriptPubKey
      </div>
      <div class="row">
        <span class="op red">OP_0</span>
      </div>
      <div class="row">
        <span class="elem brown">Hash160</span>
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        ScriptSig
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        Combined
      </div>
      <div class="row">
        <span class="op red">OP_0</span>
      </div>
      <div class="row">
        <span class="elem brown">Hash160</span>
      </div>
    </div>
  </section>
  <section>
    <h3>Witness</h3>
    <div class="bighex"><code class="red">02</code><code class="cyan">483045022100df7b7e5cda14ddf91290e02ea10786e03eb11ee36ec02dd862fe9a326bbcb7fd02203f5b4496b667e6e281cc654a2da9e4f08660c620a1051337fa8965f727eb191901</code><code class="yellow">21038262a6c6cec93c2d3ecd6c6072efea86d02ff8e3328bbd0242b20af3425990ac</code><p/>
      <ul>
        <li class="fragment"><code class="red">02</code> - Number of Witness elements</li>
        <li class="fragment"><code class="cyan">4830…01</code> - DER Signature</li>
        <li class="fragment"><code class="yellow">2103…ac</code> - Compressed SEC PubKey</li>
      </ul>
    </div>
  </section>
  <section>
    <div class="videocontainer">
      <iframe data-autoplay class="video" src="https://www.youtube.com/embed/ZHtJYfZsiAE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </section>
</section>
<section>
  <section>
    <h2>p2sh-p2wpkh</h2>
  </section>
  <section>
    <h3>What is p2sh-p2wpkh?</h3>
    <ul>
      <li class="fragment">A way to make p2wpkh backwards-compatible.</li>
      <li class="fragment">Uses p2sh to wrap p2wpkh</li>
      <li class="fragment">Looks the same as any other p2sh output.</li>
      <li class="fragment">Uses a special rule based on stack items (20-byte hash and 0)</li>
    </ul>
  </section>
  <section>
    <h3>Old Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><code class="red">01</code><code class="blue">712e5b4e97ab549d50ca60a4f5968b2225215e9fab82dae4720078711406972f</code><code class="magenta">00000000</code><code class="yellow">17160014848202fc47fb475289652fbd1912cc853ecb0096</code><code class="purple">feffffff</code><code class="red">02</code><code class="green">3236000000000000</code><code class="dark-orange">1976a914121ae7a2d55d2f0102ccc117cbcb70041b0e037f88ac</code><code class="green">1027000000000000</code><code class="dark-orange">1976a914ec0be50951651261765cfa71d7bd41c7b9245bb388ac</code><code class="dark-red">075a0700</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">712e…2f</code> - Prev tx hash
            <li><code class="magenta">00000000</code> - Prev tx index
            <li><code class="yellow">1716…96</code> - ScriptSig
            <li><code class="purple">feffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">02</code> - Number of outputs
            <li><code class="green">3236…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1976…ac</code> - ScriptPubKey
            <li><code class="dark-red">075a0700</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h3>New Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><strong><code class="light-blue">0001</code></strong><code class="red">01</code><code class="blue">712e5b4e97ab549d50ca60a4f5968b2225215e9fab82dae4720078711406972f</code><code class="purple">00000000</code><code class="yellow">17160014848202fc47fb475289652fbd1912cc853ecb0096</code><code class="purple">feffffff</code><code class="red">02</code><code class="green">3236000000000000</code><code class="dark-orange">1976a914121ae7a2d55d2f0102ccc117cbcb70041b0e037f88ac</code><code class="green">1027000000000000</code><code class="dark-orange">1976a914ec0be50951651261765cfa71d7bd41c7b9245bb388ac</code><strong><code class="cyan">024830450221009263c7de80c297d5b21aba846cf6f0a970e1d339568167d1e4c1355c7711bc1602202c9312b8d32fd9c7acc54c46cab50eb7255ce3c012214c41fe1ad91bccb16a13012102ebdf6fc448431a2bd6380f912a0fa6ca291ca3340e79b6f0c1fdaff73cf54061</code></strong><code class="dark-red">075a0700</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><strong><code class="light-blue">0001</code> - Segwit Marker</strong>
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">712e…2f</code> - Prev tx hash
            <li><code class="magenta">00000000</code> - Prev tx index
            <li><code class="yellow">1716…96</code> - ScriptSig
            <li><code class="purple">feffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">02</code> - Number of outputs
            <li><code class="green">3236…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1976…ac</code> - ScriptPubKey
            <li><strong><code class="cyan">0248…61</code> - Witness </strong>
            <li><code class="dark-red">075a0700</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h2>p2sh-p2wpkh ScriptPubKey</h2>
    <div class="bighex"><code class="purple">a9</code><code class="green">14</code><code class="dark-orange">a91465476294074330f0f622bdd0812101894467dc5d</code><code class="dark-red">87</code><p/>
      <ul>
        <li class="fragment"><code class="purple">a9</code> - <code>OP_HASH160</code></li>
        <li class="fragment"><code class="green">14</code> - Length of Hash160</li>
        <li class="fragment"><code class="dark-orange">1d7c…28</code> - Hash160</li>
        <li class="fragment"><code class="dark-red">87</code> - <code>OP_EQUAL</code></li>
      </ul>
    </div>
  </section>
  <section>
    <h2>p2sh-p2wpkh ScriptSig</h2>
    <div class="bighex"><code class="green">16</code><code class="dark-green">0014848202fc47fb475289652fbd1912cc853ecb0096</code><p/>
      <ul>
        <li class="fragment"><code class="green">16</code> - Length of RedeemScript</li>
        <li class="fragment"><code class="dark-green">0014…96</code> - RedeemScript</li>
      </ul>
    </div>
  </section>
  <section>
    <h2>Combined Script</h2>
    <div class="container">
    <div class="stack fragment">
      <div class="row">
        ScriptPubKey
      </div>
      <div class="row">
        <span class="op purple">OP_HASH160</span>
      </div>
      <div class="row">
        <span class="elem green">Hash</span>
      </div>
      <div class="row">
        <span class="op brown">OP_EQUAL</span>
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        ScriptSig
      </div>
      <div class="row">
        <span class="elem blue">RedeemScript</span>
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        Combined
      </div>
      <div class="row">
        <span class="elem blue">RedeemScript</span>
      </div>
      <div class="row">
        <span class="op purple">OP_HASH160</span>
      </div>
      <div class="row">
        <span class="elem green">Hash</span>
      </div>
      <div class="row">
        <span class="op brown">OP_EQUAL</span>
      </div>
    </div>
  </section>
  <section>
    <h3>Witness</h3>
    <div class="bighex"><code class="red">02</code><code class="cyan">4830450221009263c7de80c297d5b21aba846cf6f0a970e1d339568167d1e4c1355c7711bc1602202c9312b8d32fd9c7acc54c46cab50eb7255ce3c012214c41fe1ad91bccb16a1301</code><code class="yellow">2102ebdf6fc448431a2bd6380f912a0fa6ca291ca3340e79b6f0c1fdaff73cf54061</code><p/>
      <ul>
        <li class="fragment"><code class="red">02</code> - Number of Witness elements</li>
        <li class="fragment"><code class="cyan">4830…01</code> - DER Signature</li>
        <li class="fragment"><code class="yellow">2102…ac</code> - Compressed SEC PubKey</li>
      </ul>
    </div>
  </section>
  <section>
    <h3>RedeemScript</h3>
    <div class="bighex"><code class="red">00</code><code class="green">14</code><code class="dark-orange">848202fc47fb475289652fbd1912cc853ecb0096</code><p/>
      <ul>
        <li class="fragment"><code class="red">00</code> - <code>OP_0</code></li>
        <li class="fragment"><code class="green">14</code> - Length of Hash160</li>
        <li class="fragment"><code class="dark-orange">8482…96</code> - Hash160</li>
      </ul>
    </div>
  </section>
  <section>
    <div class="videocontainer">
      <iframe data-autoplay class="video" src="https://www.youtube.com/embed/efDU3HZAHtc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </section>
</section>
<section>
  <section>
    <h2>p2wsh</h2>
  </section>
  <section>
    <h3>What is p2wsh?</h3>
    <ul>
      <li class="fragment">Flexible script payment, like p2sh.</li>
      <li class="fragment">Is non-malleable, just like p2wpkh.</li>
      <li class="fragment">Uses a special rule based on stack items (32-byte hash and 0)</li>
      <li class="fragment">The last element of the Witness is a WitnessScript whose sha256 needs to equal the 32-byte hash.</li>
    </ul>
  </section>
  <section>
    <h3>Old Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><code class="red">01</code><code class="blue">15e180dc28a2327e687facc33f10f2a20da717e5548406f7ae8b4c811072f856</code><code class="magenta">01000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">00b4f50500000000</code><code class="dark-orange">1976a9141d7cd6c75c2e86f4cbf98eaed221b30bd9a0b92888ac</code><code class="dark-red">00000000</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">15e1…56</code> - Prev tx hash
            <li><code class="magenta">01000000</code> - Prev tx index
            <li><code class="yellow">00</code> - ScriptSig
            <li><code class="purple">ffffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">01</code> - Number of outputs
            <li><code class="green">00b4…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1976…ac</code> - ScriptPubKey
            <li><code class="dark-red">00000000</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h3>New Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><strong><code class="light-blue">0001</code></strong><code class="red">01</code><code class="blue">593a2db37b841b2a46f4e9bb63fe9c1012da3ab7fe30b9f9c974242778b5af898</code><code class="magenta">00000000</code><code class="yellow">00</code><code class="purple">ffffffff</code><code class="green">01806fb30700000000</code><code class="dark-orange">1976a914bbef244bcad13cffb68b5cef3017c7423675552288ac</code><strong><code class="cyan">040047304402203cdcaf02a44e37e409646e8a506724e9e1394b890cb52429ea65bac4cc2403f1022024b934297bcd0c21f22cee0e48751c8b184cc3a0d704cae2684e14858550af7d01483045022100feb4e1530c13e72226dc912dcd257df90d81ae22dbddb5a3c2f6d86f81d47c8e022069889ddb76388fa7948aaa018b2480ac36132009bb9cfade82b651e88b4b137a01695221026ccfb8061f235cc110697c0bfb3afb99d82c886672f6b9b5393b25a434c0cbf32103befa190c0c22e2f53720b1be9476dcf11917da4665c44c9c71c3a2d28a933c352102be46dc245f58085743b1cc37c82f0d63a960efa43b5336534275fc469b49f4ac53ae</code></strong><code class="red">00000000</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><strong><code class="light-blue">0001</code> - SegWit Marker</strong>
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">15e1…56</code> - Prev tx hash
            <li><code class="magenta">01000000</code> - Prev tx index
            <li><code class="yellow">00</code> - ScriptSig
            <li><code class="purple">ffffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">01</code> - Number of outputs
            <li><code class="green">00b4…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1976…ac</code> - ScriptPubKey
            <li><strong><code class="cyan">0400…ae</code> - Witness</strong>
            <li><code class="dark-red">00000000</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h2>p2wsh ScriptPubKey</h2>
    <div class="bighex"><code class="red">00</code><code class="green">20</code><code class="dark-orange">615ae01ed1bc1ffaad54da31d7805d0bb55b52dfd3941114330368c1bbf69b4c</code>
      <ul>
        <li class="fragment"><code class="red">00</code> - <code>OP_0</code></li>
        <li class="fragment"><code class="green">20</code> - Length of Sha256</li>
        <li class="fragment"><code class="dark-orange">615a…4c</code> - Sha256</li>
      </ul>
    </div>
  </section>
  <section>
    <h2>Combined Script</h2>
    <div class="container">
    <div class="stack fragment">
      <div class="row">
        ScriptPubKey
      </div>
      <div class="row">
        <span class="op red">OP_0</span>
      </div>
      <div class="row">
        <span class="elem green">32-byte Hash</span>
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        ScriptSig
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        Combined
      </div>
      <div class="row">
        <span class="op red">OP_0</span>
      </div>
      <div class="row">
        <span class="elem green">32-byte Hash</span>
      </div>
    </div>
  </section>
  <section>
    <h3>Witness</h3>
    <div class="medhex"><code class="red">04</code><code class="dark-red">00</code><code class="cyan">47304402203cdcaf02a44e37e409646e8a506724e9e1394b890cb52429ea65bac4cc2403f1022024b934297bcd0c21f22cee0e48751c8b184cc3a0d704cae2684e14858550af7d01</code><code class="dark-orange">483045022100feb4e1530c13e72226dc912dcd257df90d81ae22dbddb5a3c2f6d86f81d47c8e022069889ddb76388fa7948aaa018b2480ac36132009bb9cfade82b651e88b4b137a01</code><code class="brown">695221026ccfb8061f235cc110697c0bfb3afb99d82c886672f6b9b5393b25a434c0cbf32103befa190c0c22e2f53720b1be9476dcf11917da4665c44c9c71c3a2d28a933c352102be46dc245f58085743b1cc37c82f0d63a960efa43b5336534275fc469b49f4ac53ae</code>
      <div class="container">
        <div class="col">
          <ul>
            <li class="fragment"><code class="red">04</code> - Number of Witness elements</li>
            <li class="fragment"><code class="dark-red">00</code> - <code>OP_0</code></li>
            <li class="fragment"><code class="cyan">4730…01</code> - Signature 1</li>
            <li class="fragment"><code class="dark-orange">4830…01</code> - Signature 2</li>
            <li class="fragment"><code class="brown">6952…ae</code> - WitnessScript</li>
          </ul>
        </div>
        <div class="col">
          <div class="stack fragment">
            <div class="row">
              <span class="op red">OP_0</span>
            </div>
            <div class="row">
              <span class="elem cyan">Signature 1</span>
            </div>
            <div class="row">
              <span class="elem dark-orange">Signature 2</span>
            </div>
            <div class="row">
              <span class="elem brown">WitnessScript</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h3>Witness Script</h3>
    <div class="medhex"><code class="red">52</code><code class="yellow">21026ccfb8061f235cc110697c0bfb3afb99d82c886672f6b9b5393b25a434c0cbf3</code><code class="dark-orange">2103befa190c0c22e2f53720b1be9476dcf11917da4665c44c9c71c3a2d28a933c35</code><code class="cyan">2102be46dc245f58085743b1cc37c82f0d63a960efa43b5336534275fc469b49f4ac</code><code class="red">53</code><code class="brown">ae</code></div>
      <div class="container">
        <div class="col medhex">
          <ul>
            <li class="fragment"><code class="red">52</code> - <code>OP_2</code></li>
            <li class="fragment"><code class="yellow">2102…f3</code> - PubKey 1</li>
            <li class="fragment"><code class="dark-orange">2103…35</code> - PubKey 2</li>
            <li class="fragment"><code class="cyan">2102…ac</code> - PubKey 3</li>
            <li class="fragment"><code class="red">53</code> - <code>OP_3</code></li>
            <li class="fragment"><code class="brown">ae</code> - <code>OP_CHECKMULTISIG</code></li>
          </ul>
        </div>
        <div class="col">
          <div class="stack fragment">
            <div class="row">
              <span class="op red">OP_2</span>
            </div>
            <div class="row">
              <span class="elem yellow">PubKey 1</span>
            </div>
            <div class="row">
              <span class="elem dark-orange">PubKey 2</span>
            </div>
            <div class="row">
              <span class="elem cyan">PubKey 3</span>
            </div>
            <div class="row">
              <span class="op red">OP_3</span>
            </div>
            <div class="row">
              <span class="op brown">OP_CHECKMULTISIG</span>
            </div>
          </div>
        </div>
      </div>
  </section>
  <section>
    <div class="videocontainer">
      <iframe data-autoplay class="video" src="https://www.youtube.com/embed/39g9OS4H-no" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </section>
</section>
<section>
  <section>
    <h2>p2sh-p2wsh</h2>
  </section>
  <section>
    <h3>What is p2sh-p2wsh?</h3>
    <ul>
      <li class="fragment">Backwards compatible p2wsh.</li>
      <li class="fragment">Can be used for multisig and non-malleable, just like p2wsh.</li>
      <li class="fragment">Uses same special rule based on stack items (32-byte hash and 0)</li>
      <li class="fragment">The last element of the Witness is a WitnessScript whose sha256 needs to equal the 32-byte hash.</li>
    </ul>
  </section>
  <section>
    <h3>Old Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><code class="red">01</code><code class="blue">708256c5896fb3f00ef37601f8e30c5b460dbcd1fca1cd7199f9b56fc4ecd54</code><code class="magenta">00000000</code><code class="yellow">23220020615ae01ed1bc1ffaad54da31d7805d0bb55b52dfd3941114330368c1bbf69b4c</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">603edb0300000000</code><code class="dark-orange">160014bbef244bcad13cffb68b5cef3017c74236755522</code><code class="dark-red">00000000</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><code class="red">01</code> - Number of inputs
            <li><code class="blue">7082…54</code> - Prev tx hash
            <li><code class="magenta">00000000</code> - Prev tx index
            <li><code class="yellow">2322…4c</code> - ScriptSig
            <li><code class="purple">ffffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">01</code> - Number of outputs
            <li><code class="green">603e…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1600…22</code> - ScriptPubKey
            <li><code class="dark-red">00000000</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h3>New Nodes</h3>
    <div class="medhex"><code class="brown">01000000</code><code class="red">01</code><strong><code class="light-blue">0001</code></strong><code class="blue">708256c5896fb3f00ef37601f8e30c5b460dbcd1fca1cd7199f9b56fc4ecd54</code><code class="magenta">00000000</code><code class="yellow">23220020615ae01ed1bc1ffaad54da31d7805d0bb55b52dfd3941114330368c1bbf69b4c</code><code class="purple">ffffffff</code><code class="red">01</code><code class="green">603edb0300000000</code><code class="dark-orange">160014bbef244bcad13cffb68b5cef3017c74236755522</code><strong><code class="cyan">04004730440220010d2854b86b90b7c33661ca25f9d9f15c24b88c5c4992630f77ff004b998fb802204106fc3ec8481fa98e07b7e78809ac91b6ccaf60bf4d3f729c5a75899bb664a501473044022046d66321c6766abcb1366a793f9bfd0e11e0b080354f18188588961ea76c5ad002207262381a0661d66f5c39825202524c45f29d500c6476176cd910b1691176858701695221026ccfb8061f235cc110697c0bfb3afb99d82c886672f6b9b5393b25a434c0cbf32103befa190c0c22e2f53720b1be9476dcf11917da4665c44c9c71c3a2d28a933c352102be46dc245f58085743b1cc37c82f0d63a960efa43b5336534275fc469b49f4ac53ae</code></strong><code class="dark-red">00000000</code>
      <div class="container">
        <div class="col">
          <ul>
            <li><code class="brown">01000000</code> - Version
            <li><code class="red">01</code> - Number of inputs
            <li><strong><code class="light-blue">0001</code> - SegWit Marker</strong>
            <li><code class="blue">7082…54</code> - Prev tx hash
            <li><code class="magenta">00000000</code> - Prev tx index
            <li><code class="yellow">2322…4c</code> - ScriptSig
            <li><code class="purple">ffffffff</code> - Sequence
          </ul>
        </div>
        <div class="col">
          <ul>
            <li><code class="red">01</code> - Number of outputs
            <li><code class="green">603e…00</code> - Amount in Satoshis
            <li><code class="dark-orange">1600…22</code> - ScriptPubKey
            <li><strong><code class="cyan">0400…ae</code> - Witness</strong>
            <li><code class="dark-red">00000000</code> - Locktime
          </ul>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h2>p2sh-p2wsh ScriptPubKey</h2>
    <div class="bighex"><code class="purple">a9</code><code class="green">14</code><code class="dark-orange">23b1651b100da52aa29902ccc91edab329efeb12</code><code class="dark-red">87</code><p/>
      <ul>
        <li class="fragment"><code class="purple">a9</code> - <code>OP_HASH160</code></li>
        <li class="fragment"><code class="green">14</code> - Length of Hash160</li>
        <li class="fragment"><code class="dark-orange">23b1…12</code> - Hash160</li>
        <li class="fragment"><code class="dark-red">87</code> - <code>OP_EQUAL</code></li>
      </ul>
    </div>
  </section>
  <section>
    <h2>p2sh-p2wsh ScriptSig</h2>
    <div class="bighex"><code class="green">22</code><code class="dark-green">0020615ae01ed1bc1ffaad54da31d7805d0bb55b52dfd3941114330368c1bbf69b4c</code><p/>
      <ul>
        <li class="fragment"><code class="green">22</code> - Length of RedeemScript</li>
        <li class="fragment"><code class="dark-green">0020…4c</code> - RedeemScript</li>
      </ul>
    </div>
  </section>
  <section>
    <h2>Combined Script</h2>
    <div class="container">
    <div class="stack fragment">
      <div class="row">
        ScriptPubKey
      </div>
      <div class="row">
        <span class="op purple">OP_HASH160</span>
      </div>
      <div class="row">
        <span class="elem green">Hash</span>
      </div>
      <div class="row">
        <span class="op brown">OP_EQUAL</span>
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        ScriptSig
      </div>
      <div class="row">
        <span class="elem blue">RedeemScript</span>
      </div>
    </div>
    <div class="stack fragment">
      <div class="row">
        Combined
      </div>
      <div class="row">
        <span class="elem blue">RedeemScript</span>
      </div>
      <div class="row">
        <span class="op purple">OP_HASH160</span>
      </div>
      <div class="row">
        <span class="elem green">Hash</span>
      </div>
      <div class="row">
        <span class="op brown">OP_EQUAL</span>
      </div>
    </div>
  </section>
  <section>
    <h3>RedeemScript</h3>
    <div class="bighex"><code class="red">00</code><code class="green">20</code><code class="dark-orange">615ae01ed1bc1ffaad54da31d7805d0bb55b52dfd3941114330368c1bbf69b4c</code><p/>
      <div class="container">
        <div class="col">
          <ul>
            <li class="fragment"><code class="red">00</code> - <code>OP_0</code></li>
            <li class="fragment"><code class="green">20</code> - Length of Sha256</li>
            <li class="fragment"><code class="dark-orange">615a…4c</code> - Sha256</li>
          </ul>
        </div>
        <div class="col">
          <div class="stack fragment">
            <div class="row">
              <span class="op red">OP_0</span>
            </div>
            <div class="row">
              <span class="elem dark-orange">32-byte Hash</span>
            </div>
          </div>
        </div>
    </div>
  </section>
  <section>
    <h3>Witness</h3>
    <div class="medhex"><code class="red">04</code><code class="dark-red">00</code><code class="cyan">4730440220010d2854b86b90b7c33661ca25f9d9f15c24b88c5c4992630f77ff004b998fb802204106fc3ec8481fa98e07b7e78809ac91b6ccaf60bf4d3f729c5a75899bb664a501</code><code class="dark-orange">473044022046d66321c6766abcb1366a793f9bfd0e11e0b080354f18188588961ea76c5ad002207262381a0661d66f5c39825202524c45f29d500c6476176cd910b1691176858701</code><code class="brown">695221026ccfb8061f235cc110697c0bfb3afb99d82c886672f6b9b5393b25a434c0cbf32103befa190c0c22e2f53720b1be9476dcf11917da4665c44c9c71c3a2d28a933c352102be46dc245f58085743b1cc37c82f0d63a960efa43b5336534275fc469b49f4ac53ae</code>
      <div class="container">
        <div class="col">
          <ul>
            <li class="fragment"><code class="red">04</code> - Number of Witness elements</li>
            <li class="fragment"><code class="dark-red">00</code> - <code>OP_0</code></li>
            <li class="fragment"><code class="cyan">4730…01</code> - Signature 1</li>
            <li class="fragment"><code class="dark-orange">4730…01</code> - Signature 2</li>
            <li class="fragment"><code class="brown">6952…ae</code> - WitnessScript</li>
          </ul>
        </div>
        <div class="col">
          <div class="stack fragment">
            <div class="row">
              <span class="op red">OP_0</span>
            </div>
            <div class="row">
              <span class="elem cyan">Signature 1</span>
            </div>
            <div class="row">
              <span class="elem dark-orange">Signature 2</span>
            </div>
            <div class="row">
              <span class="elem brown">WitnessScript</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section>
    <h3>Witness Script</h3>
    <div class="medhex"><code class="red">52</code><code class="yellow">21026ccfb8061f235cc110697c0bfb3afb99d82c886672f6b9b5393b25a434c0cbf3</code><code class="dark-orange">2103befa190c0c22e2f53720b1be9476dcf11917da4665c44c9c71c3a2d28a933c35</code><code class="cyan">2102be46dc245f58085743b1cc37c82f0d63a960efa43b5336534275fc469b49f4ac</code><code class="red">53</code><code class="brown">ae</code></div>
      <div class="container">
        <div class="col medhex">
          <ul>
            <li class="fragment"><code class="red">52</code> - <code>OP_2</code></li>
            <li class="fragment"><code class="yellow">2102…f3</code> - PubKey 1</li>
            <li class="fragment"><code class="dark-orange">2103…35</code> - PubKey 2</li>
            <li class="fragment"><code class="cyan">2102…ac</code> - PubKey 3</li>
            <li class="fragment"><code class="red">53</code> - <code>OP_3</code></li>
            <li class="fragment"><code class="brown">ae</code> - <code>OP_CHECKMULTISIG</code></li>
          </ul>
        </div>
        <div class="col">
          <div class="stack fragment">
            <div class="row">
              <span class="op red">OP_2</span>
            </div>
            <div class="row">
              <span class="elem yellow">PubKey 1</span>
            </div>
            <div class="row">
              <span class="elem dark-orange">PubKey 2</span>
            </div>
            <div class="row">
              <span class="elem cyan">PubKey 3</span>
            </div>
            <div class="row">
              <span class="op red">OP_3</span>
            </div>
            <div class="row">
              <span class="op brown">OP_CHECKMULTISIG</span>
            </div>
          </div>
        </div>
      </div>
  </section>
  <section>
    <div class="videocontainer">
      <iframe data-autoplay class="video" src="https://www.youtube.com/embed/ZROtlZIZHZs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </section>
</section>
<section>
  <section>
    <h1>Next Steps</h1>
  </section>
  <section>
    <h2>What to Study Next</h2>
    <ul>
      <li class="fragment">HD Wallets (BIP32, BIP44)</li>
      <li class="fragment">Mnemonic Backups (BIP39)</li>
      <li class="fragment">Segwit Signing and Verification (BIP147)</li>
      <li class="fragment">Compact Filters (BIP158)</li>
      <li class="fragment">Schnorr Signatures/Taproot (BIP340, BIP341, BIP342)</li>
    </ul>
  </section>
  <section>
    <h2>How to Bootstrap your Career</h2>
    <ul>
      <li class="fragment">Create your own project</li>
      <li class="fragment">Wallet/Block Explorer/Utility Library in your preferred programming language</li>
      <li class="fragment">Contribute to Open Source projects</li>
      <li class="fragment">Python Bitcoin Library based on the code from this class: <a href="https://github.com/buidl-bitcoin/buidl-python">buidl</a></li>
    </ul>
  </section>
  <section>
    <h2>Getting Local Jobs</h2>
    <ul>
      <li class="fragment">Easier to get, but not as abundant</li>
      <li class="fragment">Local Meetups</li>
      <li class="fragment">Program against APIs of target companies</li>
      <li class="fragment">LinkedIn/Recruiters</li>
    </ul>
  </section>
  <section>
    <h2>Getting Remote Jobs</h2>
    <ul>
      <li class="fragment">Harder to get</li>
      <li class="fragment">Need Reputation</li>
      <li class="fragment">Open Source</li>
      <li class="fragment">Conferences/Meet People</li>
      <li class="fragment">Public Profile</li>
    </ul>
  </section>
  <section>
    <h2>Marketing Your Brand</h2>
    <ul>
      <li class="fragment">Open Source Contributions</li>
      <li class="fragment">Twitter/Medium/Bitcoin Magazine</li>
      <li class="fragment">YouTube/Podcasts/TikTok/Twitch</li>
      <li class="fragment">High Quality</li>
      <li class="fragment">Consistency</li>
    </ul>
  </section>
  <section>
    <h2>Contests</h2>
    <ul>
      <li class="fragment">Company Recruitment</li>
      <li class="fragment">Hackathons</li>
      <li class="fragment">Online Contests</li>
    </ul>
  </section>
  <section>
    <h2>Helping You Succeed</h2>
    <ul>
      <li class="fragment">Promote Bitcoin Projects</li>
      <li class="fragment">Twitter/Newsletter/Podcast</li>
      <li class="fragment">Connect on <a href="https://www.linkedin.com/in/jimmysong/">LinkedIn</a></li>
      <li class="fragment">Connect you to Open Source Projects</li>
      <li class="fragment">Join the alumni Telegram group</li>
      <li class="fragment">Send me your goals!</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h1 class="fragment">Congratulations!</h1>
    <p class="fragment">Please post your thoughts on this class on social media!</p>
  </section>
</section>
</div>
</div>
<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script src="plugin/math/math.js"></script>
<script>
  // More info about initialization & config:
  // - https://revealjs.com/initialization/
  // - https://revealjs.com/config/
  Reveal.initialize({
      hash: true,
      plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath ]
  });
  MathJax.Hub.Config({
      jax: ["input/TeX","output/HTML-CSS"],
      displayAlign: "left"
  });
</script>
</body>
</html>
